<form id="topics-form">
  <div class="modal-header">
    <h5 class="modal-title">为 {{ source.domain }} 管理议题</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
  </div>
  <div class="modal-body">
    <p class="text-muted small">请选择该信息源所属的议题：</p>
    <div class="list-group">
      {% if all_topics %}
        {% for topic in all_topics %}
        <label class="list-group-item">
          <input class="form-check-input me-2"
                 type="checkbox"
                 name="topic_ids"
                 value="{{ topic.id }}"
                 {% if topic.id in source_topic_ids %}checked{% endif %}>
          {{ topic.name }}
        </label>
        {% endfor %}
      {% else %}
        <div class="alert alert-info mb-0">暂无可用议题。</div>
      {% endif %}
    </div>
    <div id="topics-form-feedback" class="mt-3"></div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
    {% if all_topics %}
      <button type="button" id="saveTopicsBtn" class="btn btn-primary" onclick="submitTopicsForm({{ source.id }})">
        <span class="spinner-border spinner-border-sm d-none" role="status"></span>
        保存更改
      </button>
    {% endif %}
  </div>
</form>